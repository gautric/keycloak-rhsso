{
	"info": {
		"_postman_id": "d1906bf9-5c22-4940-b80a-aefd2345b66a",
		"name": "RHSSO",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Realm Managment",
			"item": [
				{
					"name": "Add Realm",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", () => {",
									"  pm.response.to.have.status(201);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"userRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"enabled\":true,\n    \"id\":\"{{realm_target}}\",\n    \"realm\":\"{{realm_target}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Realm",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", () => {",
									"  pm.response.to.have.status(201);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"userRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "User Managment",
			"item": [
				{
					"name": "Get Users",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"let template =",
									"    `",
									" <table bgcolor=\"#FFFFFF\">",
									"        <tr>",
									"            <th>Username</th>",
									"            <th>Id</th>     ",
									"        </tr>",
									"",
									"        {{#each data }}",
									"        <tr>",
									"            <td>{{username}}</td>",
									"            <td>{{id}}</td>",
									"        </tr>",
									"        {{/each}}",
									"    </table>",
									"`",
									"",
									"pm.visualizer.set(template, { \"data\": jsonData } )"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", () => {",
									"  pm.response.to.have.status(201);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"userRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{   \n    \"firstName\":\"{{$randomFirstName}}\",\n    \"lastName\":\"{{$randomLastName}}\",\n    \"email\":\"{{username}}_{{userRandomId}}@example.com\", \n    \"enabled\":\"true\", \n    \"username\":\"{{username}}_{{userRandomId}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Users Count",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users/count",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users",
								"count"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Users by {{username}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"pm.collectionVariables.set(\"user_id\", jsonData[0].id);",
									"",
									"",
									"console.info(pm.collectionVariables.get(\"user_id\"));",
									"",
									"console.info(pm.variables.get(\"user_id\"));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users?username={{username}}_{{userRandomId}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users"
							],
							"query": [
								{
									"key": "username",
									"value": "{{username}}_{{userRandomId}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User {{user_id}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"console.log(pm.variables.get(\"user_id\"));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users/{{user_id}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users",
								"{{user_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get User {{user_id}} Groups",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users/{{user_id}}/groups",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users",
								"{{user_id}}",
								"groups"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete User {{user_id}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users/{{user_id}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users",
								"{{user_id}}"
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "noauth"
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Client Managment",
			"item": [
				{
					"name": "Get Clients",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/clients",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"clients"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status code is 201\", () => {",
									"  pm.response.to.have.status(201);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"clientId\": \"{{clientId}}\",\n    \"rootUrl\": \"http://example.com:8080\",\n    \"adminUrl\": \"http://example.com:8080\",\n    \"baseUrl\": \"/js-console\",\n    \"surrogateAuthRequired\": false,\n    \"enabled\": true,\n    \"alwaysDisplayInConsole\": false,\n    \"clientAuthenticatorType\": \"client-secret\",\n    \"redirectUris\": [\n        \"/js-console/\"\n    ],\n    \"webOrigins\": [\n        \"http://example.com:8080/js-console\"\n    ],\n    \"notBefore\": 0,\n    \"bearerOnly\": false,\n    \"consentRequired\": false,\n    \"standardFlowEnabled\": true,\n    \"implicitFlowEnabled\": false,\n    \"directAccessGrantsEnabled\": false,\n    \"serviceAccountsEnabled\": false,\n    \"publicClient\": true,\n    \"frontchannelLogout\": false,\n    \"protocol\": \"openid-connect\",\n    \"attributes\": {\n        \"saml.assertion.signature\": \"false\",\n        \"saml.force.post.binding\": \"false\",\n        \"saml.multivalued.roles\": \"false\",\n        \"saml.encrypt\": \"false\",\n        \"saml.server.signature\": \"false\",\n        \"saml.server.signature.keyinfo.ext\": \"false\",\n        \"exclude.session.state.from.auth.response\": \"false\",\n        \"saml_force_name_id_format\": \"false\",\n        \"saml.client.signature\": \"false\",\n        \"tls.client.certificate.bound.access.tokens\": \"false\",\n        \"saml.authnstatement\": \"false\",\n        \"display.on.consent.screen\": \"false\",\n        \"saml.onetimeuse.condition\": \"false\"\n    },\n    \"authenticationFlowBindingOverrides\": {},\n    \"fullScopeAllowed\": true,\n    \"nodeReRegistrationTimeout\": -1,\n    \"protocolMappers\": [\n        {\n            \"name\": \"Group\",\n            \"protocol\": \"openid-connect\",\n            \"protocolMapper\": \"oidc-group-membership-mapper\",\n            \"consentRequired\": false,\n            \"config\": {\n                \"full.path\": \"true\",\n                \"id.token.claim\": \"true\",\n                \"access.token.claim\": \"true\",\n                \"claim.name\": \"group\",\n                \"userinfo.token.claim\": \"true\"\n            }\n        }\n    ],\n    \"defaultClientScopes\": [\n        \"web-origins\",\n        \"role_list\",\n        \"profile\",\n        \"roles\",\n        \"email\"\n    ],\n    \"optionalClientScopes\": [\n        \"address\",\n        \"phone\",\n        \"offline_access\",\n        \"microprofile-jwt\"\n    ],\n    \"access\": {\n        \"view\": true,\n        \"configure\": true,\n        \"manage\": true\n    }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/clients",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"clients"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Client {{clientId}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"pm.collectionVariables.set(\"client_id\", jsonData[0].id);",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/clients?clientId={{clientId}}&search=false",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"clients"
							],
							"query": [
								{
									"key": "clientId",
									"value": "{{clientId}}"
								},
								{
									"key": "search",
									"value": "false"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Client {{client_id}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/clients/{{client_id}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"clients",
								"{{client_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Client {{client_id}}",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"//postman.setEnvironmentVariable(\"user_id\", jsonData[0].id);",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/clients/{{client_id}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"clients",
								"{{client_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Group Managment",
			"item": [
				{
					"name": "Get Groups",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"",
									"if(jsonData.length > 0) {",
									"    pm.collectionVariables.set(\"group_id\", jsonData[0].id);",
									"} else {",
									"    console.warn(\"No Group\")",
									"}",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/groups",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"groups"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status code is 201\", () => {",
									"  pm.response.to.have.status(201);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"groupRandomId\", Math.floor(Math.random() * 1000));",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "    {\n        \"name\": \"group{{groupRandomId}}\",\n        \"path\": \"/group{{groupRandomId}}\",\n        \"subGroups\": []\n    }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/groups",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"groups"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Group by name",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"pm.collectionVariables.set(\"group_id\", jsonData[0].id);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/groups?search={{groupRandomId}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"groups"
							],
							"query": [
								{
									"key": "search",
									"value": "{{groupRandomId}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add User To Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status code is 204\", () => {",
									"  pm.response.to.have.status(204);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"groupRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"realm\": \"{{realm_target}}\",\n    \"userId\": \"{{user_id}}\",\n    \"groupId\": \"{{group_id}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users/{{user_id}}/groups/{{group_id}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users",
								"{{user_id}}",
								"groups",
								"{{group_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete User from Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									"",
									"//postman.setEnvironmentVariable(\"group_id\", jsonData[0].id);",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"postman.setEnvironmentVariable(\"groupRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/users/{{user_id}}/groups/{{group_id}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"users",
								"{{user_id}}",
								"groups",
								"{{group_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Group",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									"",
									"//postman.setEnvironmentVariable(\"group_id\", jsonData[0].id);",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"groupRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "    {\n        \"name\": \"group{{groupRandomId}}\",\n        \"path\": \"/group{{groupRandomId}}\",\n        \"subGroups\": []\n    }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/groups/{{group_id}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"groups",
								"{{group_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Role Managment",
			"item": [
				{
					"name": "Get Roles for Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"if(jsonData.length > 0) {",
									"    pm.collectionVariables.set(\"role_id\", jsonData[0].id);",
									"} else {",
									"    console.warn(\"No Role for client\")",
									"}",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/clients/{{client_id}}/roles",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"clients",
								"{{client_id}}",
								"roles"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Role for Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status code is 201\", () => {",
									"  pm.response.to.have.status(201);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"roleRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "    {\n        \"name\": \"role_client_{{roleRandomId}}\",\n        \"clientRole\": true\n    }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/clients/{{client_id}}/roles",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"clients",
								"{{client_id}}",
								"roles"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Role for Client by name",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var list = (jsonData).length;",
									"",
									"for (var i = 0; i < list; i++) ",
									"{",
									"    if(jsonData[i].name == 'role_client_'+ pm.variables.get(\"roleRandomId\"))",
									"    {",
									"        pm.collectionVariables.set(\"role_id\", jsonData[i].id);",
									"        pm.collectionVariables.set(\"role_name\", jsonData[i].name);",
									"    }",
									"}",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/clients/{{client_id}}/roles",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"clients",
								"{{client_id}}",
								"roles"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add client-level roles to the user role mapping",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status code is 204\", () => {",
									"  pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"//postman.setEnvironmentVariable(\"roleRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "[\n    {\n        \"id\" : \"{{role_id}}\",\n        \"name\": \"{{role_name}}\",\n        \"clientRole\": true\n    }\n]",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/groups/{{group_id}}/role-mappings/clients/{{client_id}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"groups",
								"{{group_id}}",
								"role-mappings",
								"clients",
								"{{client_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Roles for Realm",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"pm.collectionVariables.set(\"role_id\", jsonData[0].id);",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/roles",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"roles"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Role for Realm",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//var jsonData = JSON.parse(responseBody);",
									"",
									"pm.test(\"Status code is 201\", () => {",
									"  pm.response.to.have.status(201);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"roleRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "    {\n        \"name\": \"role_realm_{{roleRandomId}}\",\n        \"clientRole\": false\n    }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/roles",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"roles"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Role for Realm by name",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"",
									"var list = (jsonData).length;",
									"",
									"for (var i = 0; i < list; i++) ",
									"{",
									"    if(jsonData[i].name == 'role_realm_'+ pm.variables.get(\"roleRandomId\"))",
									"    {",
									"        pm.collectionVariables.set(\"role_id\", jsonData[i].id);",
									"        pm.collectionVariables.set(\"role_name\", jsonData[i].name);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/roles?seach=role_client_{{roleRandomId}}",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"roles"
							],
							"query": [
								{
									"key": "seach",
									"value": "role_client_{{roleRandomId}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add realm-level role mappings to the user",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 204\", () => {",
									"  pm.response.to.have.status(204);",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"postman.setEnvironmentVariable(\"roleRandomId\", Math.floor(Math.random() * 1000));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "[\n    {\n        \"id\" : \"{{role_id}}\",\n        \"name\": \"{{role_name}}\",\n        \"clientRole\": false\n    }\n]",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{server}}/auth/admin/realms/{{realm_target}}/groups/{{group_id}}/role-mappings/realm",
							"host": [
								"{{server}}"
							],
							"path": [
								"auth",
								"admin",
								"realms",
								"{{realm_target}}",
								"groups",
								"{{group_id}}",
								"role-mappings",
								"realm"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Get Token",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var jsonData = JSON.parse(responseBody);",
							"pm.collectionVariables.set(\"refresh_token\", jsonData.refresh_token);",
							"pm.collectionVariables.set(\"access_token\", jsonData.access_token);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "client_id",
							"value": "admin-cli",
							"type": "text"
						},
						{
							"key": "username",
							"value": "{{api_user}}",
							"type": "text"
						},
						{
							"key": "password",
							"value": "{{api_password}}",
							"type": "text"
						},
						{
							"key": "grant_type",
							"value": "password",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{server}}/auth/realms/{{realm}}/protocol/openid-connect/token",
					"host": [
						"{{server}}"
					],
					"path": [
						"auth",
						"realms",
						"{{realm}}",
						"protocol",
						"openid-connect",
						"token"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get OIDC Conf",
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{server}}/auth/realms/{{realm}}/.well-known/openid-configuration",
					"host": [
						"{{server}}"
					],
					"path": [
						"auth",
						"realms",
						"{{realm}}",
						".well-known",
						"openid-configuration"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Keys",
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{server}}/auth/realms/{{realm}}/protocol/openid-connect/certs",
					"host": [
						"{{server}}"
					],
					"path": [
						"auth",
						"realms",
						"{{realm}}",
						"protocol",
						"openid-connect",
						"certs"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"var client_id      = pm.variables.get(\"client_id\");",
					"var client_secret  = pm.variables.get(\"client_secret\");",
					"var token_endpoint = pm.variables.get(\"token_endpoint\");",
					"var scope          = pm.variables.get(\"scope\");",
					"",
					"var server = pm.variables.get(\"server\");",
					"var realm = pm.variables.get(\"realm\");",
					"",
					"var token_endpoint = server + \"/auth/realms/\" + realm + \"/protocol/openid-connect/token\";",
					"",
					"var time = new Date().getTime();",
					"var last = pm.environment.get(\"last_request_time\");",
					"",
					"console.warn((time-last))",
					"",
					"if( last == NaN || (time - last) > 45*1000 ) {",
					"    pm.sendRequest({",
					"        url: token_endpoint,",
					"        method: 'POST',",
					"        header: {",
					"            'Content-Type': 'application/x-www-form-urlencoded'",
					"        },",
					"        body: {",
					"            mode: 'urlencoded',",
					"            urlencoded: [",
					"                {key: \"client_id\", value: \"admin-cli\", disabled: false},",
					"                {key: \"username\", value: pm.variables.get(\"api_user\"), disabled: false},",
					"                {key: \"password\", value: pm.variables.get(\"api_password\"), disabled: false},",
					"                {key: \"grant_type\", value: \"password\", disabled: false}",
					"            ]",
					"        }",
					"    },  function(err, response) {",
					"        ",
					"        const jsonResponse = response.json();",
					"        if(err){",
					"            console.error(\"Error \");",
					"        }",
					"        pm.environment.set(\"last_request_time\", time);",
					"        pm.environment.set(\"access_token\", jsonResponse.access_token);",
					"    }); ",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"pm.test(\"Response must be valid\", function(){",
					"    pm.response.to.not.be.error;",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"key": "server",
			"value": "http://192.168.1.99:8080"
		},
		{
			"key": "realm",
			"value": "master"
		},
		{
			"key": "realm_target",
			"value": "example"
		},
		{
			"key": "clientId",
			"value": "js-console2"
		},
		{
			"key": "redirect",
			"value": "http://192.168.1.99:8080/js-console/"
		},
		{
			"key": "api_user",
			"value": "admin"
		},
		{
			"key": "api_password",
			"value": "admin123_"
		},
		{
			"key": "username",
			"value": "user"
		},
		{
			"key": "user_id",
			"value": ""
		},
		{
			"key": "userRandomId",
			"value": ""
		},
		{
			"key": "client_id",
			"value": ""
		},
		{
			"key": "group_id",
			"value": ""
		},
		{
			"key": "groupRandomId",
			"value": ""
		},
		{
			"key": "role_id",
			"value": ""
		},
		{
			"key": "role_name",
			"value": ""
		},
		{
			"key": "refresh_token",
			"value": ""
		},
		{
			"key": "access_token",
			"value": ""
		},
		{
			"key": "roleRandomId",
			"value": ""
		}
	]
}